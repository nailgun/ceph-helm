image:
  src: docker.io/ceph/daemon:tag-build-master-jewel-ubuntu-14.04
  pull_policy: Always
  debug: true

service:
  mon:
    name: ceph-mon
    port: 6789
    enable_probes: false

pod_network: 10.2.0.0/16

ceph:
  storage:
    base_dir: /storage
  config:
    global:
      # auth
      cephx: true
      cephx_require_signatures: false
      cephx_cluster_require_signatures: true
      cephx_service_require_signatures: false
      # osd
      max_open_files: 131072
      osd_pool_default_pg_num: 128
      osd_pool_default_pgp_num: 128
      osd_pool_default_size: 2
      osd_pool_default_min_size: 1
      mon_osd_full_ratio: .95
      mon_osd_nearfull_ratio: .85
    mon:
      mon_osd_down_out_interval: 600
      mon_osd_min_down_reporters: 4
      mon_clock_drift_allowed: .15
      mon_clock_drift_warn_backoff: 30
      mon_osd_report_timeout: 300
    osd:
      # journal
      journal_size: 100
      # filesystem
      osd_mkfs_type: xfs
      osd_mkfs_options_xfs: '-f -i size=2048'
      osd_mon_heartbeat_interval: 30
      osd_max_object_name_len: 256
      osd_max_object_namespace_len: 64
      # crush
      osd_pool_default_crush_rule: 0
      osd_crush_update_on_start: true
      # backend
      osd_objectstore: filestore
      # performance tuning
      filestore_merge_threshold: 40
      filestore_split_multiple: 8
      osd_op_threads: 8
      filestore_op_threads: 8
      filestore_max_sync_interval: 5
      osd_max_scrubs: 1
      # recovery tuning
      osd_recovery_max_active: 5
      osd_max_backfills: 2
      osd_recovery_op_priority: 2
      osd_client_op_priority: 63
      osd_recovery_max_chunk: 1048576
      osd_recovery_threads: 1
      # ports
      ms_bind_port_min: 6800
      ms_bind_port_max: 7100
    client:
      rbd_cache_enabled: true
      rbd_cache_writethrough_until_flush: true
      rbd_default_features: 1
    mds:
      mds_cache_size: 100000

resources:
  enable_limits: false
  osd:
    requests:
      memory: 512Mi
      cpu: 1000m
    limits:
      memory: 1024Mi
      cpu: 2000m
  mds:
    replicas: 0
    requests:
      memory: 10Mi
      cpu: 250m
    limits:
      memory: 50Mi
      cpu: 500m
  mon:
    replicas: 3
    requests:
      memory: 50Mi
      cpu: 1000m
    limits:
      memory: 100Mi
      cpu: 2000m
  mon_health:
    replicas: 0
    requests:
      memory: 5Mi
      cpu: 250m
    limits:
      memory: 50Mi
      cpu: 500m

storageclass:
  name: general
  pool: rbd
  make_default: true
  # do not change the following
  admin_id: admin
  admin_secret_name: rbd-admin
  user_id: user
  user_secret_name: rbd-user

# do not change
secrets:
  keyrings:
    mon: ceph-mon-keyring
    mds: ceph-bootstrap-mds-keyring
    osd: ceph-bootstrap-osd-keyring
    rgw: ceph-bootstrap-rgw-keyring
    admin: ceph-client-admin-keyring
